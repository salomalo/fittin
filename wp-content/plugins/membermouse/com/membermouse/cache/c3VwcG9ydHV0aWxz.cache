/**
 * 
 * MemberMouse(TM) (http://www.membermouse.com)
 * (c) MemberMouse, LLC. All rights reserved.
 */
class MM_SupportUtils
{
	public static function hasEmailSupport()
	{
		if(MM_MemberMouseService::hasPermission(MM_MemberMouseService::$SUPPORT_EMAIL))
		{
			return true;
		}
		return false;
	}
	
	public static function hasPhoneSupport()
	{
		if(MM_MemberMouseService::hasPermission(MM_MemberMouseService::$SUPPORT_PHONE))
		{
			return true;
		}
		return false;
	}
	
	public static function getSupportPin()
	{
		$pin = "";
		
		if(self::hasPhoneSupport())
		{
			$pin .= "P";
		}
		
		if(self::hasEmailSupport())
		{
			$pin .= "E";
		}
		
		$license = new MM_License();
		
		if($license->isValid())
		{
			$pin .= $license->getId();
			return $pin;
		}
		else
		{
			return "";
		}
	}
	
	public static function supportMenuItem($module)
	{
		$url = "http://support.membermouse.com/support";
		
		switch($module)
		{
			case MM_MODULE_API:
				$url .= "/search?term=api";
				break;
				
			case MM_MODULE_PUSH_NOTIFICATIONS:
				$url .= "/search?term=push+notifications";
				break;
				
			case MM_MODULE_WORDPRESS_HOOKS:
				$url .= "/search?term=wordpress+hooks";
				break;
				
			case MM_MODULE_PHP_INTERFACE:
				$url .= "/search?term=php+interface";
				break;
				
			case MM_MODULE_PAYMENT_METHODS:
				$url .= "/search?term=payment+methods";
				break;
				
			case MM_MODULE_TEST_DATA:
				$url .= "/search?term=test+data";
				break;
				
			case MM_MODULE_CHECKOUT_OTHER_SETTINGS:
				$url .= "/search?term=checkout+settings";
				break;
				
			case MM_MODULE_CANCELLATION_METHOD:
				$url .= "/search?term=cancellation+method";
				break;
				
			case MM_MODULE_LIMELIGHT_PRODUCTS:
			case MM_MODULE_LIMELIGHT_SHIPPING_METHODS:
				$url .= "/search?term=lime+light";
				break;
				
			case MM_MODULE_AFFILIATE_INTEGRATION:
				$url .= "/search?term=affiliate+integration";
				break;
				
			case MM_MODULE_COMMISSION_PROFILES:
				$url .= "/search?term=commission+profiles";
				break;
				
			case MM_MODULE_AFFILIATE_TRACKING:
				$url .= "/search?term=affiliate+tracking";
				break;
				
			case MM_MODULE_EMAIL_INTEGRATION:
				$url .= "/search?term=email+integration";
				break;
				
			case MM_EMAIL_TEMPLATES:
				$url .= "/search?term=email+templates";
				break;
				
			case MM_MODULE_MEMBERSHIP_LEVELS:
				$url .= "/search?term=membership+levels";
				break;
				
			case MM_MODULE_BUNDLES:
				$url .= "/search?term=bundles";
				break;
				
			case MM_MODULE_PRODUCTS:
				$url .= "/search?term=products";
				break;
				
			case MM_MODULE_COUPONS:
				$url .= "/search?term=coupons";
				break;
				
			case MM_MODULE_CUSTOM_FIELDS:
				$url .= "/search?term=custom+fields";
				break;
				
			case MM_MODULE_COUNTRIES:
				$url .= "/search?term=countries";
				break;
				
			case MM_MODULE_SHIPPING:
				$url .= "/search?term=shipping+methods";
				break;
				
			case MM_MODULE_FREE_MEMBER_FORM:
				$url .= "/search?term=free+member+webform";
				break;
				
			case MM_MODULE_LOGIN_FORM:
				$url .= "/search?term=login+webform";
				break;
				
			case MM_MODULE_LOGS:
				$url .= "/search?term=log";
				break;
				
			case MM_MODULE_ACTIVITY_LOG:
			case MM_MODULE_MEMBER_DETAILS_ACTIVITY_LOG:
				$url .= "/search?term=activity+log";
				break;
				
			case MM_MODULE_PAYPAL_IPN_LOG:
				$url .= "/search?term=paypal+ipn+log";
				break;
				
			case MM_MODULE_EMPLOYEES:
				$url .= "/search?term=employees";
				break;
				
			case MM_MODULE_DRIP_CONTENT_SCHEDULE:
				$url .= "/search?term=drip+content+schedule";
				break;
			
			case MM_MODULE_MEMBER_DETAILS_GENERAL:
				$url .= "/search?term=member+details+general";
				break;
				
				$url .= "/search?term=member+details+access+rights";
				break;
			
			case MM_MODULE_MEMBER_DETAILS_SUBSCRIPTIONS:
				$url .= "/search?term=member+details+subscriptions";
				break;
				
			case MM_MODULE_MEMBER_DETAILS_TRANSACTION_HISTORY:
				$url .= "/search?term=member+details+transaction+history";
				break;
				
			case MM_MODULE_MEMBER_DETAILS_GIFT_HISTORY:
				$url .= "/search?term=member+details+gift+history";
				break;
				
			case MM_MODULE_MEMBER_DETAILS_CUSTOM_FIELDS:
				$url .= "/search?term=member+details+custom+fields";
				break;
				
			case MM_MODULE_IMPORT_WIZARD:
				$url .= "/search?term=import+wizard";
				break;
				
			case MM_MODULE_USER_DEFINED_PAGES:
				$url .= "/search?term=user+defined+pages";
				break;
				
			case MM_MODULE_SAFE_MODE:
				$url .= "/search?term=safe+mode";
				break;
				
			case MM_MODULE_DUPLICATE_SUBSCRIPTION_TOOL:
				$url .= "/search?term=duplicate+subscriptions";
				break;
				
			case MM_MODULE_EXTENSIONS:
				$url .= "/search?term=extensions";
				break;
				
			case MM_MODULE_OTHER_SETTINGS:
				$url .= "/search?term=general+settings";
				break;
				
			case MM_MODULE_VERSION_HISTORY:
			case MM_MODULE_REPAIR_MEMBERMOUSE:
			case MM_MODULE_REPAIR_INSTALL:
				break;
		}
		
		echo "<li class=\"dropdown right\">";
		echo "<a href=\"{$url}\" target=\"_blank\"><i class=\"fa fa-support\"></i> Need help?</a>";
		
		if(self::hasEmailSupport() || self::hasPhoneSupport())
		{
			echo "<ul>";
			
			echo "<li><a href=\"{$url}\" target=\"_blank\"><i class=\"fa fa-video-camera\"></i> Related Videos & Articles</a></li>";
				
			if(self::hasEmailSupport())
			{
				echo "<li><a href=\"".MM_ModuleUtils::getUrl(MM_MODULE_GENERAL_SETTINGS, MM_MODULE_SUPPORT)."\"><i class=\"fa fa-envelope\"></i> Contact Support</a></li>";
			}
			
			/*if(self::hasPhoneSupport())
			{
				echo "<li><a href=\"#\"><i class=\"fa fa-phone\"></i> (512) 630-2219</a></li>";
			}*/
			
			echo "</ul>";
		}
		
		echo "</li>";
	}
}
